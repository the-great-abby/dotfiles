#!/bin/bash
# Initialize quiz question banks

# Source common GTD helpers (DRY - reuse existing helpers)
GTD_COMMON="$HOME/code/dotfiles/bin/gtd-common.sh"
if [[ ! -f "$GTD_COMMON" && -f "$HOME/code/personal/dotfiles/bin/gtd-common.sh" ]]; then
  GTD_COMMON="$HOME/code/personal/dotfiles/bin/gtd-common.sh"
fi
if [[ -f "$GTD_COMMON" ]]; then
  source "$GTD_COMMON"
else
  echo "Warning: gtd-common.sh not found. Some features may not work." >&2
fi

# GTD_BASE_DIR is already set by init_gtd_paths in gtd-common.sh (DRY - reuse existing helper)
QUIZ_DIR="${GTD_BASE_DIR}/quizzes"
QUIZ_DATA_DIR="${QUIZ_DIR}/data"
QUIZ_SOURCE_DIR="$HOME/code/dotfiles/zsh/quizzes"

# Create directories
mkdir -p "$QUIZ_DATA_DIR"

# Copy question banks if they exist
if [[ -d "$QUIZ_SOURCE_DIR" ]]; then
  echo "Copying question banks..."
  
  for file in "$QUIZ_SOURCE_DIR"/*.json; do
    if [[ -f "$file" ]]; then
      filename=$(basename "$file")
      cp "$file" "$QUIZ_DATA_DIR/$filename"
      echo "  âœ“ Copied $filename"
    fi
  done
fi

echo ""
echo "Quiz question banks initialized!"
echo "Question banks available in: $QUIZ_DATA_DIR"

